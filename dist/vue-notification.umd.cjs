(function(i,a){typeof exports=="object"&&typeof module<"u"?module.exports=a(require("vue")):typeof define=="function"&&define.amd?define(["vue"],a):(i=typeof globalThis<"u"?globalThis:i||self,i.VueNotification=a(i.Vue))})(this,function(i){"use strict";const a=new i({name:"vue-notification"}),h={x:["left","center","right"],y:["top","bottom"]},$=(t=>()=>t++)(0),E=t=>typeof t!="string"?[]:t.split(/\s+/gi).filter(e=>e),k=t=>{typeof t=="string"&&(t=E(t));let e=null,n=null;return t.forEach(s=>{h.y.indexOf(s)!==-1&&(n=s),h.x.indexOf(s)!==-1&&(e=s)}),{x:e,y:n}};function C(t,e,n){let s,o=e;this.pause=function(){clearTimeout(n.timer),o-=Date.now()-s},this.resume=function(){s=Date.now(),clearTimeout(n.timer),n.timer=setTimeout(t,o)},this.resume()}const u={position:["top","right"],cssAnimation:"vn-fade",velocityAnimation:{enter:t=>{var e=t.clientHeight;return{height:[e,0],opacity:[1,0]}},leave:{height:0,opacity:[0,1]}}},m=(t,e)=>{const n=t.__vccOpts||t;for(const[s,o]of e)n[s]=o;return n},x={name:"VelocityGroup",methods:{enter(t,e){this.$emit("enter",{el:t,complete:e})},leave(t,e){this.$emit("leave",{el:t,complete:e})},afterLeave(){this.$emit("afterLeave")}}};function A(t,e,n,s,o,l){return i.openBlock(),i.createBlock(i.TransitionGroup,{css:!1,onEnter:l.enter,onLeave:l.leave,onAfterLeave:l.afterLeave},{default:i.withCtx(()=>[i.renderSlot(t.$slots,"default")]),_:3},8,["onEnter","onLeave","onAfterLeave"])}const D=m(x,[["render",A]]),N={name:"CssGroup",props:["name"]};function B(t,e,n,s,o,l){return i.openBlock(),i.createBlock(i.TransitionGroup,{name:n.name},{default:i.withCtx(()=>[i.renderSlot(t.$slots,"default")]),_:3},8,["name"])}const b=m(N,[["render",B]]),y="[-+]?[0-9]*.?[0-9]+",g=[{name:"px",regexp:new RegExp(`^${y}px$`)},{name:"%",regexp:new RegExp(`^${y}%$`)},{name:"px",regexp:new RegExp(`^${y}$`)}];var w=t=>{if(t==="auto")return{type:t,value:0};for(var e=0;e<g.length;e++){let n=g[e];if(n.regexp.test(t))return{type:n.name,value:parseFloat(t)}}return{type:"",value:t}};const L=t=>{switch(typeof t){case"number":return{type:"px",value:t};case"string":return w(t);default:return{type:"",value:t}}},Y="",d={IDLE:0,DESTROYED:2},S={name:"Notifications",components:{VelocityGroup:D,CssGroup:b},props:{group:{type:String,default:""},width:{type:[Number,String],default:300},reverse:{type:Boolean,default:!1},position:{type:[String,Array],default:()=>u.position},classes:{type:String,default:"vue-notification"},animationType:{type:String,default:"css",validator(t){return t==="css"||t==="velocity"}},animation:{type:Object,default(){return u.velocityAnimation}},animationName:{type:String,default:u.cssAnimation},speed:{type:Number,default:300},cooldown:{type:Number,default:0},duration:{type:Number,default:3e3},delay:{type:Number,default:0},max:{type:Number,default:1/0},ignoreDuplicates:{type:Boolean,default:!1},closeOnClick:{type:Boolean,default:!0},pauseOnHover:{type:Boolean,default:!1}},data(){return{list:[],velocity:v.params.velocity,timerControl:""}},mounted(){a.$on("add",this.addItem),a.$on("close",this.closeItem)},computed:{actualWidth(){return L(this.width)},isVA(){return this.animationType==="velocity"},componentName(){return this.isVA?"VelocityGroup":"CssGroup"},styles(){const{x:t,y:e}=k(this.position),n=this.actualWidth.value,s=this.actualWidth.type;let o={width:n+s,[e]:"0px"};return t==="center"?o.left=`calc(50% - ${n/2}${s})`:o[t]="0px",o},active(){return this.list.filter(t=>t.state!==d.DESTROYED)},botToTop(){return this.styles.hasOwnProperty("bottom")}},methods:{destroyIfNecessary(t){this.$emit("click",t),this.closeOnClick&&this.destroy(t)},pauseTimeout(){this.pauseOnHover&&this.timerControl.pause()},resumeTimeout(){this.pauseOnHover&&this.timerControl.resume()},addItem(t){if(t.group=t.group||"",t.data=t.data||{},this.group!==t.group)return;if(t.clean||t.clear){this.destroyAll();return}const e=typeof t.duration=="number"?t.duration:this.duration,n=typeof t.speed=="number"?t.speed:this.speed,s=typeof t.ignoreDuplicates=="boolean"?t.ignoreDuplicates:this.ignoreDuplicates;let{title:o,text:l,type:r,data:c,id:M}=t;const p={id:M||$(),title:o,text:l,type:r,state:d.IDLE,speed:n,length:e+2*n,data:c};e>=0&&(this.timerControl=new C(()=>this.destroy(p),p.length,p));let W=this.reverse?!this.botToTop:this.botToTop,f=-1;const z=this.active.some(T=>T.title===t.title&&T.text===t.text);(!s||!z)&&(W?(this.list.push(p),this.active.length>this.max&&(f=0)):(this.list.unshift(p),this.active.length>this.max&&(f=this.active.length-1)),f!==-1&&this.destroy(this.active[f]))},closeItem(t){this.destroyById(t)},notifyClass(t){return["vue-notification-template",this.classes,t.type]},notifyWrapperStyle(t){return this.isVA?null:{transition:`all ${t.speed}ms`}},destroy(t){clearTimeout(t.timer),t.state=d.DESTROYED,this.isVA||this.clean(),this.$emit("destroy",t)},destroyById(t){const e=this.list.find(n=>n.id===t);e&&this.destroy(e)},destroyAll(){this.active.forEach(this.destroy)},getAnimation(t,e){const n=this.animation[t];return typeof n=="function"?n.call(this,e):n},enter({el:t,complete:e}){const n=this.getAnimation("enter",t);this.velocity(t,n,{duration:this.speed,complete:e})},leave({el:t,complete:e}){let n=this.getAnimation("leave",t);this.velocity(t,n,{duration:this.speed,complete:e})},clean(){this.list=this.list.filter(t=>t.state!==d.DESTROYED)}}},_=["data-id"],O=["onClick"],I=["innerHTML"],G=["innerHTML"];function H(t,e,n,s,o,l){return i.openBlock(),i.createElementBlock("div",{class:"vue-notification-group",style:i.normalizeStyle(t.styles)},[(i.openBlock(),i.createBlock(i.resolveDynamicComponent(t.componentName),{name:t.animationName,onEnter:t.enter,onLeave:t.leave,onAfterLeave:t.clean},{default:i.withCtx(()=>[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(t.active,r=>(i.openBlock(),i.createElementBlock("div",{class:"vue-notification-wrapper",style:i.normalizeStyle(t.notifyWrapperStyle(r)),key:r.id,"data-id":r.id,onMouseenter:e[0]||(e[0]=(...c)=>t.pauseTimeout&&t.pauseTimeout(...c)),onMouseleave:e[1]||(e[1]=(...c)=>t.resumeTimeout&&t.resumeTimeout(...c))},[i.renderSlot(t.$slots,"body",{class:i.normalizeClass([t.classes,r.type]),item:r,close:()=>t.destroy(r)},()=>[i.createElementVNode("div",{class:i.normalizeClass(t.notifyClass(r)),onClick:c=>t.destroyIfNecessary(r)},[r.title?(i.openBlock(),i.createElementBlock("div",{key:0,class:"notification-title",innerHTML:r.title},null,8,I)):i.createCommentVNode("",!0),i.createElementVNode("div",{class:"notification-content",innerHTML:r.text},null,8,G)],10,O)])],44,_))),128))]),_:3},40,["name","onEnter","onLeave","onAfterLeave"]))],4)}const R=m(S,[["render",H]]),v={install(t,e={}){if(this.installed)return;this.installed=!0,this.params=e,t.component(e.componentName||"notifications",R);const n=o=>{typeof o=="string"&&(o={title:"",text:o}),typeof o=="object"&&a.$emit("add",o)};n.close=function(o){a.$emit("close",o)};const s=e.name||"notify";t.prototype["$"+s]=n,t[s]=n}};return v});
